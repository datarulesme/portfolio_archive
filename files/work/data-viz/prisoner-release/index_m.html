<!DOCTYPE html>
<meta charset="utf-8">

<html>
<head>
<link href="http://data.nbcstations.com/national/templates/css/generic-ots-table.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="style2.css">
</head>
<body>
<div class="wrap">
  <div class="title"><h1>Reduced Federal Sentences Under the 'Drugs Minus Two' Amendment</h1>Of 17,446 applications for reduced sentences, 13,187 were granted. In this graphic, we explore how many sentences were reduced by the state where the prisoner was convicted. We also break down those convictions by drug type and the inmate's race, citizenship status and gender.</br></div>
  <div class="drugs"><h1>Convictions by Drug Type</h1></div>
  <div class="race"><h1>Convictions by Race</h1></div>
  <div class="citi"><h1>Convictions by Citizen- ship Status</h1></div>
  <div class="bar"><h1>Convictions by Gender</h1></div>
  <div class=table><h1>Number of Reduced Convictions by State</h1>
  <table>
  <tr>
    <th>State</th>
    <th>Reduced Convictions</th>
  </tr>
  <tr>
    <td>Alabama</td>
    <td>283</td>
  </tr>
  <tr>
    <td>Alaska</td>
    <td>68</td>
  </tr>
  <tr>
    <td>Arizona</td>
    <td>1</td>
  </tr>
  <tr>
    <td>Arkansas</td>
    <td>117</td>
  </tr>
  <tr>
    <td>California</td>
    <td>571</td>
  </tr>
  <tr>
    <td>Colorado</td>
    <td>66</td>
  </tr>
  <tr>
    <td>Connecticut</td>
    <td>29.6</td>
  </tr>
  <tr>
    <td>Delaware</td>
    <td>10</td>
  </tr>
  <tr>
    <td>Florida</td>
    <td>863</td>
  </tr>
  <tr>
    <td>Georgia</td>
    <td>424</td>
  </tr>
  <tr>
    <td>Hawaii</td>
    <td>141</td>
  </tr>
  <tr>
    <td>Idaho</td>
    <td>114</td>
  </tr>
  <tr>
    <td>Illinois</td>
    <td>660</td>
  </tr>
  <tr>
    <td>Indiana</td>
    <td>150</td>
  </tr>
  <tr>
    <td>Iowa</td>
    <td>730</td>
  </tr>
  <tr>
    <td>Kansas</td>
    <td>307</td>
  </tr>
  <tr>
    <td>Kentucky</td>
    <td>181</td>
  </tr>
  <tr>
    <td>Louisiana</td>
    <td>94</td>
  </tr>
  <tr>
    <td>Maine</td>
    <td>96</td>
  </tr>
  <tr>
    <td>Maryland</td>
    <td>196</td>
  </tr>
  <tr>
    <td>Massachusetts</td>
    <td>65</td>
  </tr>
  <tr>
    <td>Michigan</td>
    <td>62</td>
  </tr>
  <tr>
    <td>Minnesota</td>
    <td>100</td>
  </tr>
  <tr>
    <td>Mississippi</td>
    <td>240</td>
  </tr>
  <tr>
    <td>Missouri</td>
    <td>481</td>
  </tr>
  <tr>
    <td>Montana</td>
    <td>147</td>
  </tr>
  <tr>
    <td>Nebraska</td>
    <td>128</td>
  </tr>
  <tr>
    <td>Nevada</td>
    <td>58</td>
  </tr>
  <tr>
    <td>New Hampshire</td>
    <td>28</td>
  </tr>
  <tr>
    <td>New Jersey</td>
    <td>107</td>
  </tr>
  <tr>
    <td>New Mexico</td>
    <td>24</td>
  </tr>
  <tr>
    <td>New York</td>
    <td>336</td>
  </tr>
  <tr>
    <td>North Carolina</td>
    <td>470</td>
  </tr>
  <tr>
    <td>North Dakota</td>
    <td>32</td>
  </tr>
  <tr>
    <td>Ohio</td>
    <td>394</td>
  </tr>
  <tr>
    <td>Oklahoma</td>
    <td>198</td>
  </tr>
  <tr>
    <td>Oregon</td>
    <td>65</td>
  </tr>
  <tr>
    <td>Pennsylvania</td>
    <td>342</td>
  </tr>
  <tr>
    <td>Rhode Island</td>
    <td>36</td>
  </tr>
  <tr>
    <td>South Dakota</td>
    <td>73</td>
  </tr>
  <tr>
    <td>South Carolina</td>
    <td>329</td>
  </tr>
  <tr>
    <td>Tennessee</td>
    <td>230</td>
  </tr>
  <tr>
    <td>Texas</td>
    <td>2105</td>
  </tr>
  <tr>
    <td>Utah</td>
    <td>104</td>
  </tr>
  <tr>
    <td>Vermont</td>
    <td>24</td>
  </tr>
  <tr>
    <td>Virginia</td>
    <td>692</td>
  </tr>
  <tr>
    <td>Washington</td>
    <td>135</td>
  </tr>
  <tr>
    <td>West Virginia</td>
    <td>258</td>
  </tr>
  <tr>
    <td>Wisconsin</td>
    <td>199</td>
  </tr>
  <tr>
    <td>Wyoming</td>
    <td>73</td>
  </tr>
  <tr>
    <td>District of Columbia</td>
    <td>45</td>
  </tr>
  <tr>
    <td>Puerto Rico</td>
    <td>218</td>
  </tr>
</table>
  </div>
  <div class="credits">Sources: United States Sententencing Commission </br>Credit: Cynthia Andrews/NBC</div> 
</div>
</body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

<script>
	
var width = 300,
    height = 300,
    radius = Math.min(width, height) / 2,
    innerRadius = 0.1 * radius;

var pie = d3.layout.pie()
    .sort(null)
    .value(function(d) { return d.width; });

var arc = d3.svg.arc()
  .innerRadius(innerRadius)
  .outerRadius(function (d) { 
    return (radius - innerRadius) * (d.data.percentage / 32.0) + innerRadius; 
  });

var svg = d3.select(".drugs").append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

d3.csv('data.csv', function(error, data) {

  data.forEach(function(d) {
    d.color  =  d.color;
    d.width  = +d.percentage;
  });


var path = svg.selectAll(".solidArc")
      .data(pie(data))
    .enter().append("path")
      .attr("fill", function(d) { return d.data.color; })
      .attr("class", "solidArc")
      .attr("stroke", "white")
      .attr("d", arc)

svg.append("text")
  .attr("dx", -20)
  .attr("dy", 90)
  .attr("class", "label")
  .attr("fill", "#F8F8FF")
  .text(function(d) {return "27.2%"});

svg.append("text")
  .attr("dx", -28)
  .attr("dy", 75)
  .attr("class", "label")
  .attr("fill", "#F8F8FF")
  .text(function(d) {return "Cocaine"});

svg.append("text")
  .attr("dx", -90)
  .attr("dy", -20)
  .attr("class", "label")
  .attr("fill", "white")
  .text(function(d) { return "30.9%"});

svg.append("text")
  .attr("dx", -90)
  .attr("dy", -35)
  .attr("class", "label")
  .attr("fill", "white")
  .text(function(d) { return "Meth"});

svg.append("text")
  .attr("dx", 40)
  .attr("dy", 25)
  .attr("class", "label")
  .attr("fill", "white")
  .text(function(d) {return "20.5%"})

svg.append("text")
  .attr("dx", 20)
  .attr("dy", 10)
  .attr("class", "labelS")
  .attr("fill", "white")
  .text(function(d) {return " Crack Cocaine"})

svg.append("line")
  .style("stroke", "grey")
  .attr("x1", -6)
  .attr("y1", -120)
  .attr("x2", -6)
  .attr("y2", -40)

svg.append("line")
  .style("stroke", "grey")
  .attr("x1", -6)
  .attr("y1", -120)
  .attr("x2", 40)
  .attr("y2", -120)

svg.append("text")
  .attr("dx", 45)
  .attr("dy", -115)
  .attr("class", "label")
  .text(function(d) {return "4.7%"})


svg.append("line")
  .style("stroke", "grey")
  .attr("x1",10)
  .attr("y1", -90)
  .attr("x2", 10)
  .attr("y2", -55)

svg.append("line")
  .style("stroke", "grey")
  .attr("x1", 10)
  .attr("y1", -90)
  .attr("x2", 40)
  .attr("y2", -90)

svg.append("text")
  .attr("dx", 45)
  .attr("dy", -90)
  .attr("class", "label")
  .text(function(d) {return "9.1%"})

svg.append("line")
  .style("stroke", "grey")
  .attr("x1",35)
  .attr("y1", -60)
  .attr("x2", 35)
  .attr("y2", -35)

svg.append("line")
  .style("stroke", "grey")
  .attr("x1", 35)
  .attr("y1", -60)
  .attr("x2", 40)
  .attr("y2", -60)

svg.append("text")
  .attr("dx", 45)
  .attr("dy", -60)
  .attr("class", "label")
  .text(function(d) {return "7.6%"})

svg.append("text")
  .attr("dx", 80)
  .attr("dy", -115)
  .attr("class", "label")
  .text(function(d) {return "Other"})
svg.append("text")
  .attr("dx", 80)
  .attr("dy", -90)
  .attr("class", "label")
  .text(function(d) {return "Marijuana"})
svg.append("text")
  .attr("dx", 80)
  .attr("dy", -60)
  .attr("class", "label")
  .text(function(d) {return "Heroin"})

d3.selectAll("text").style("cursor", "default")
});


</script>

<script>
  
var width2 = 300,
    height2 = 300,
    radius2 = Math.min(width2, height2) / 2,
    innerRadius2 = 0.1 * radius2;

var pie2 = d3.layout.pie()
    .sort(null)
    .value(function(d) { return d.width; });

var arc2 = d3.svg.arc()
  .innerRadius(innerRadius2)
  .outerRadius(function (d) { 
    return (radius2 - innerRadius2) * (d.data.racepercent / 41.0) + innerRadius2; 
  });

var svg2 = d3.select(".race").append("svg")
    .attr("width", width2)
    .attr("height", height2)
    .append("g")
    .attr("transform", "translate(" + width2 / 2 + "," + height2 / 2 + ")");

d3.csv('data.csv', function(error, data) {

  data.forEach(function(d) {
    d.color  =  d.racecolor;
    d.width  = +d.racepercent;
  });
  
var path2 = svg2.selectAll(".solidArc")
      .data(pie2(data))
    .enter().append("path")
      .attr("fill", function(d) { return d.data.color; })
      .attr("class", "solidArc")
      .attr("stroke", "white")
      .attr("d", arc2)

svg2.append("text")
  .attr("dx", 10)
  .attr("dy", 70)
  .attr("class", "label")
  .attr("fill", "#F8F8FF")
  .text(function(d) {return "34.4%"});

svg2.append("text")
  .attr("dx", -90)
  .attr("dy", -10)
  .attr("class", "label")
  .attr("fill", "white")
  .text(function(d) { return "38.4%"});

svg2.append("text")
  .attr("dx", 20)
  .attr("dy", -30)
  .attr("class", "label")
  .attr("fill", "white")
  .text(function(d) {return "24.2%"})

svg2.append("line")
  .style("stroke", "grey")
  .attr("x1", -12)
  .attr("y1", -120)
  .attr("x2", -3)
  .attr("y2", -30)

svg2.append("line")
  .style("stroke", "grey")
  .attr("x1", -12)
  .attr("y1", -120)
  .attr("x2", 40)
  .attr("y2", -120)

svg2.append("text")
  .attr("dx", 45)
  .attr("dy", -115)
  .attr("class", "label")
  .text(function(d) {return "3%"})

svg2.append("text")
  .attr("dx", -25)
  .attr("dy", 55)
  .attr("class", "label")
  .attr("fill", "#F8F8FF")
  .text(function(d) {return "African American"});
svg2.append("text")
  .attr("dx", -95)
  .attr("dy", -25)
  .attr("class", "label")
  .attr("fill", "white")
  .text(function(d) { return "Hispanic"});
svg2.append("text")
  .attr("dx", 10)
  .attr("dy", -45)
  .attr("class", "label")
  .attr("fill", "white")
  .text(function(d) {return "Caucasian"})
svg2.append("text")
  .attr("dx", 80)
  .attr("dy", -115)
  .attr("class", "label")
  .text(function(d) {return "Other"})

d3.selectAll("text").style("cursor", "default")
});

</script>
<script>
  
var width3 = 300,
    height3 = 300,
    radius3 = Math.min(width3, height3) / 2,
    innerRadius3 = 0.1 * radius3;

var pie3 = d3.layout.pie()
    .sort(null)
    .value(function(d) { return d.width; });

var arc3 = d3.svg.arc()
  .innerRadius(innerRadius3)
  .outerRadius(function (d) { 
    return (radius3 - innerRadius3) * (d.data.citpercent / 85.0) + innerRadius3; 
  });

var svg3 = d3.select(".citi").append("svg")
    .attr("width", width3)
    .attr("height", height3)
    .append("g")
    .attr("transform", "translate(" + width3 / 2 + "," + height3 / 2 + ")");

d3.csv('data.csv', function(error, data) {

  data.forEach(function(d) {
    d.color  =  d.citcolor;
    d.width  = +d.citpercent;
  });
  
var path3 = svg3.selectAll(".solidArc")
      .data(pie3(data))
    .enter().append("path")
      .attr("fill", function(d) { return d.data.color; })
      .attr("class", "solidArc")
      .attr("stroke", "white")
      .attr("d", arc3)

svg3.append("text")
  .attr("dx", 10)
  .attr("dy", 70)
  .attr("class", "label")
  .attr("fill", "#F8F8FF")
  .text(function(d) {return "76.5%"});

svg3.append("text")
  .style("cursor","default")
  .attr("dx", -90)
  .attr("dy", -60)
  .attr("class", "label")
  .text(function(d) {return "23.5%"})

svg3.append("text")
  .attr("dx", 5)
  .attr("dy", 55)
  .attr("class", "label")
  .attr("fill", "#F8F8FF")
  .text(function(d) {return "Citizens"});

svg3.append("text")
  .style("cursor","default")
  .attr("dx", -110)
  .attr("dy", -75)
  .attr("class", "label")
  .text(function(d) {return "Non-Citizens"})


svg3.append("line")
  .style("stroke", "grey")
  .attr("x1", -40)
  .attr("y1", -65)
  .attr("x2", -30)
  .attr("y2", -65)

svg3.append("line")
  .style("stroke", "grey")
  .attr("x1", -30)
  .attr("y1", -65)
  .attr("x2", -30)
  .attr("y2", -45)


d3.selectAll("text").style("cursor", "default")
});

</script>

<script>

var margin = {top: 45, right: 40, bottom: 75, left: 45},
    width4 = 300 - margin.left - margin.right,
    height4 = 300 - margin.top - margin.bottom;

var x0 = d3.scale.ordinal()
    .rangeRoundBands([0, width4], .1);

var x1 = d3.scale.ordinal();

var y = d3.scale.linear()
    .range([height4, 0]);

var color = d3.scale.ordinal()
    .range(["#28566F", "#E27660"]);

var xAxis = d3.svg.axis()
    .scale(x0)
    .orient("bottom")

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .ticks(6)
    .tickFormat(d3.format("%"));

var svg4 = d3.select(".bar").append("svg")
    .attr("width", width4 + margin.left + margin.right)
    .attr("height", height4 + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var formatPercent = d3.format(".0%");

d3.csv("data2.csv", function(error, data) {
  if (error) throw error;

  var drugNames = d3.keys(data[0]).filter(function(key) { return key !== "Drug"; });

  data.forEach(function(d) {
    d.drugs = drugNames.map(function(name) { return {name: name, value: +d[name]}; });
  });

  x0.domain(data.map(function(d) { return d.Drug; }));
  x1.domain(drugNames).rangeRoundBands([0, x0.rangeBand()]);
  y.domain([0, 1]);

  svg4.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height4 + ")")
      .call(xAxis)    
    .selectAll("text")
      .attr("y", 9)
      .attr("x", 4)
      .attr("dy", ".35em")
      .attr("class", "p")
      .attr("transform", "rotate(45)")
      .style("text-anchor", "start");
  
  svg4.append("g")
      .attr("class", "axis")
      .call(yAxis)

  var Drug = svg4.selectAll(".Drug")
      .data(data)
    .enter().append("g")
      .attr("class", "g")
      .attr("transform", function(d) { return "translate(" + x0(d.Drug) + ",0)"; });

  Drug.selectAll("rect")
      .data(function(d) { return d.drugs; })
    .enter().append("rect")
      .attr("width", x1.rangeBand())
      .attr("x", function(d) { return x1(d.name); })
      .attr("y", function(d) { return y(d.value); })
      .attr("height", function(d) { return height4 - y(d.value); })
      .style("fill", function(d) { return color(d.name); });

  var legend = svg4.selectAll(".legend")
      .data(drugNames.slice().reverse())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
      .attr("x", width4 - 18)
      .attr("y", -35)      
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  legend.append("text")
      .attr("x", width4 - 24)
      .attr("y", -25)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d; });

d3.selectAll("text").style("cursor", "default")
});

</script>

</body>
</html>